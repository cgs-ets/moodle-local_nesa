{"version":3,"file":"control.min.js","sources":["../src/control.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle. If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript controller for adding Studies Code column to grading tables.\n *\n * @module     local_nesa/control\n * @copyright  2025 Veronica Bermegui\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * Add Studies Code column to the user grades table (gradebook).\n *\n * @param {Object} nesanumbers - Object mapping user IDs to their NESA data\n */\nconst setStudiesCodeForUserGradesTable = (nesanumbers) => {\n    const table = document.getElementById('user-grades');\n\n    if (!table) {\n        return;\n    }\n\n    const headingRow = table.querySelector('tr.heading');\n    if (!headingRow) {\n        return;\n    }\n\n    const useremailColumn = headingRow.querySelector('th.userfield.useremail');\n    if (!useremailColumn) {\n        return;\n    }\n\n    // Get the column index of the useremail column\n    const emailIndex = Array.from(headingRow.children).indexOf(useremailColumn);\n\n    // Create NESA column header\n    const nesaHeader = document.createElement('th');\n    nesaHeader.className = `userfield studiescode cell c${emailIndex}`;\n    nesaHeader.setAttribute('data-col', 'studiescode');\n    nesaHeader.setAttribute('scope', 'col');\n\n    // Create span with data-collapse content\n    const spanElement = document.createElement('span');\n    spanElement.setAttribute('data-collapse', 'content');\n    spanElement.textContent = 'Studies Code';\n\n    // Create button element\n    const buttonElement = document.createElement('button');\n    buttonElement.className = 'nesa-number btn btn-link btn-icon icon-size-3 cellmenubtn';\n    buttonElement.setAttribute('type', 'button');\n    buttonElement.setAttribute('data-toggle', 'dropdown');\n    buttonElement.setAttribute('aria-haspopup', 'true');\n    buttonElement.setAttribute('aria-expanded', 'false');\n    buttonElement.setAttribute('data-type', 'studiescode');\n    buttonElement.setAttribute('data-id', 'studiescode');\n\n    nesaHeader.appendChild(spanElement);\n    nesaHeader.appendChild(buttonElement);\n\n    // Insert the studies code column header before useremail\n    useremailColumn.parentNode.insertBefore(nesaHeader, useremailColumn);\n\n    // Add the studies code column to each row in the tbody\n    const tbodyRows = table.querySelectorAll('tbody tr');\n    tbodyRows.forEach((row) => {\n        const userid = row.getAttribute('data-uid');\n        const studiescode = nesanumbers[userid]?.studies_code !== undefined\n            ? nesanumbers[userid].studies_code\n            : 'N/A';\n\n        // Create the new studies code cell with a div inside.\n        const nesaCell = document.createElement('td');\n        nesaCell.className = `userfield studiescode cell c${emailIndex}`;\n        nesaCell.setAttribute('data-col', 'studiescode');\n\n        const divElement = document.createElement('div');\n        divElement.setAttribute('data-collapse', 'content');\n        divElement.textContent = studiescode;\n\n        nesaCell.appendChild(divElement);\n\n        // Find the useremail cell and insert the studies code cell before it\n        const useremailCell = row.querySelector('td.userfield.useremail');\n        if (useremailCell) {\n            useremailCell.parentNode.insertBefore(nesaCell, useremailCell);\n        }\n    });\n\n    // Adjust the class of the useremail column in the header (shift to next column)\n    headingRow.querySelectorAll('th.userfield.useremail').forEach((th) => {\n        const newClassNumber = emailIndex + 1;\n        th.classList.remove(`c${emailIndex}`);\n        th.classList.add(`c${newClassNumber}`);\n    });\n\n    // Adjust the class for the useremail column cells (body rows)\n    table.querySelectorAll('tbody td.userfield.useremail').forEach((td) => {\n        const newClassNumber = emailIndex + 1;\n        td.classList.remove(`c${emailIndex}`);\n        td.classList.add(`c${newClassNumber}`);\n    });\n\n    // Shift classes for all columns after useremail in the heading\n    const allHeaders = headingRow.querySelectorAll('th');\n    allHeaders.forEach((th, index) => {\n        if (index > emailIndex) {\n            const newClassNumber = index + 1;\n            th.classList.remove(`c${index + 1}`);\n            th.classList.add(`c${newClassNumber}`);\n        }\n    });\n\n    // Shift classes for all columns after useremail in the body rows\n    table.querySelectorAll('tbody td').forEach((td) => {\n        const currentColumnIndex = Array.from(td.parentNode.children).indexOf(td);\n        if (currentColumnIndex > emailIndex) {\n            const newClassNumber = currentColumnIndex + 1;\n            td.classList.remove(`c${currentColumnIndex + 1}`);\n            td.classList.add(`c${newClassNumber}`);\n        }\n    });\n\n    // Change the colspan to adapt to the number of userfield columns\n    const firstTr = table.querySelector('tr');\n    const topLeftCell = firstTr?.querySelector('th.cell.topleft');\n    const userfieldCount = headingRow.querySelectorAll('th.userfield').length;\n\n    if (topLeftCell) {\n        // +1 because the firstname/lastname doesn't have the userfield class\n        topLeftCell.setAttribute('colspan', userfieldCount + 1);\n    }\n\n    // Update the colspan for rows after the last userrow\n    const userRows = table.querySelectorAll('tr.userrow');\n    const lastUserRow = userRows[userRows.length - 1];\n\n    if (lastUserRow) {\n        let nextSibling = lastUserRow.nextElementSibling;\n        while (nextSibling) {\n            const thElement = nextSibling.querySelector('th');\n            if (thElement) {\n                thElement.setAttribute('colspan', userfieldCount + 1);\n            }\n            nextSibling = nextSibling.nextElementSibling;\n        }\n    }\n};\n\n// Track current sort state for Studies Code column\nlet studiesCodeSortAsc = true;\n\n/**\n * Sort the submissions table by Studies Code column.\n *\n * @param {HTMLTableElement} table - The table element\n */\nconst sortTableByStudiesCode = (table) => {\n    const tbody = table.querySelector('tbody');\n    if (!tbody) {\n        return;\n    }\n\n    // Only select direct children tr of tbody, not nested tr inside file submission tables\n    const allRows = Array.from(tbody.querySelectorAll(':scope > tr'));\n\n    // Sort rows by the Studies Code value\n    allRows.sort((a, b) => {\n        const cellA = a.querySelector('td.studiescode');\n        const cellB = b.querySelector('td.studiescode');\n\n        const valueA = cellA ? cellA.textContent.trim() : '';\n        const valueB = cellB ? cellB.textContent.trim() : '';\n\n        // Handle N/A values - push them to the end\n        if (valueA === 'N/A' && valueB !== 'N/A') {\n            return 1;\n        }\n        if (valueB === 'N/A' && valueA !== 'N/A') {\n            return -1;\n        }\n\n        // Compare alphanumerically\n        const comparison = valueA.localeCompare(valueB, undefined, {numeric: true, sensitivity: 'base'});\n        return studiesCodeSortAsc ? comparison : -comparison;\n    });\n\n    // Re-append rows in sorted order\n    allRows.forEach((row) => {\n        tbody.appendChild(row);\n    });\n\n    // Toggle sort direction for next click\n    studiesCodeSortAsc = !studiesCodeSortAsc;\n};\n\n/**\n * Check if the current page is showing all results (no pagination).\n *\n * @returns {boolean} True if showing all results\n */\nconst isShowingAll = () => {\n    const url = new URL(window.location.href);\n    const perpage = url.searchParams.get('perpage');\n    // perpage=-1 means \"show all\" in Moodle\n    return perpage === '-1';\n};\n\n/**\n * Redirect to show all results with a marker to sort after load.\n */\nconst redirectToShowAllAndSort = () => {\n    const url = new URL(window.location.href);\n    url.searchParams.set('perpage', '-1');\n    url.searchParams.set('sortbystudiescode', '1'); // Marker to trigger sort after page load\n    window.location.href = url.toString();\n};\n\n/**\n * Add Studies Code column to the submissions table (mod/assign grading view).\n *\n * @param {Object} nesanumbers - Object mapping user IDs to their NESA data\n */\nconst setStudiesCodeForSubmissionsTable = (nesanumbers) => {\n    const table = document.getElementById('submissions');\n\n    if (!table) {\n        return;\n    }\n\n    // Find the header row - it's in thead\n    const thead = table.querySelector('thead');\n    if (!thead) {\n        return;\n    }\n\n    const headingRow = thead.querySelector('tr');\n    if (!headingRow) {\n        return;\n    }\n\n    // Find the email column header (class contains 'email' and 'header')\n    const useremailColumn = headingRow.querySelector('th.email');\n    if (!useremailColumn) {\n        return;\n    }\n\n    // Get the column index\n    const emailIndex = Array.from(useremailColumn.parentNode.children).indexOf(useremailColumn);\n\n    // Create Studies Code column header with sort functionality\n    const studiesCodeHeader = document.createElement('th');\n    studiesCodeHeader.className = `header c${emailIndex} studiescode`;\n    studiesCodeHeader.setAttribute('scope', 'col');\n    studiesCodeHeader.style.cursor = 'pointer';\n\n    // Create clickable link for sorting\n    const sortLink = document.createElement('a');\n    sortLink.href = '#';\n    sortLink.textContent = 'Studies Code';\n    sortLink.title = 'Click to sort by Studies Code';\n    sortLink.style.textDecoration = 'none';\n    sortLink.style.color = 'inherit';\n\n    // Add sort icon\n    const sortIcon = document.createElement('span');\n    sortIcon.className = 'sort-icon';\n    sortIcon.innerHTML = ' ↕';\n    sortLink.appendChild(sortIcon);\n\n    sortLink.addEventListener('click', (e) => {\n        e.preventDefault();\n\n        if (!isShowingAll()) {\n            // Need to show all first, then sort\n            redirectToShowAllAndSort();\n        } else {\n            // Already showing all, sort directly\n            sortTableByStudiesCode(table);\n            // Update sort icon\n            sortIcon.innerHTML = studiesCodeSortAsc ? ' ↓' : ' ↑';\n        }\n    });\n\n    studiesCodeHeader.appendChild(sortLink);\n\n    // Insert the Studies Code column header before email\n    useremailColumn.parentNode.insertBefore(studiesCodeHeader, useremailColumn);\n\n    // Add the Studies Code column to each row in the tbody\n    const tbodyRows = table.querySelectorAll('tbody tr');\n\n    tbodyRows.forEach((row) => {\n        // Extract userid from row class (format: \"user123\")\n        const rowClasses = row.className.split(' ');\n        const userClass = rowClasses.find(cls => cls.startsWith('user') && cls !== 'userrow');\n        const userid = userClass ? userClass.replace('user', '') : null;\n\n        const studiescode = userid && nesanumbers[userid]?.studies_code\n            ? nesanumbers[userid].studies_code\n            : 'N/A';\n\n        // Create the new Studies Code cell\n        const studiesCodeCell = document.createElement('td');\n        studiesCodeCell.className = `cell c${emailIndex} studiescode`;\n        studiesCodeCell.textContent = studiescode;\n\n        // Find the email cell and insert the Studies Code cell before it\n        const useremailCell = row.querySelector('td.email');\n        if (useremailCell) {\n            useremailCell.parentNode.insertBefore(studiesCodeCell, useremailCell);\n        }\n    });\n\n    // Adjust column classes for email and subsequent columns in header\n    const allHeaders = headingRow.querySelectorAll('th');\n    allHeaders.forEach((th, index) => {\n        if (index >= emailIndex && index !== emailIndex) {\n            // This is email or after - shift the class number\n            const oldClassMatch = th.className.match(/c(\\d+)/);\n            if (oldClassMatch) {\n                const oldNum = parseInt(oldClassMatch[1], 10);\n                th.classList.remove(`c${oldNum}`);\n                th.classList.add(`c${oldNum + 1}`);\n            }\n        }\n    });\n\n    // Adjust column classes for email and subsequent columns in body\n    tbodyRows.forEach((row) => {\n        const cells = row.querySelectorAll('td');\n        cells.forEach((td, index) => {\n            if (index >= emailIndex && index !== emailIndex) {\n                const oldClassMatch = td.className.match(/c(\\d+)/);\n                if (oldClassMatch) {\n                    const oldNum = parseInt(oldClassMatch[1], 10);\n                    td.classList.remove(`c${oldNum}`);\n                    td.classList.add(`c${oldNum + 1}`);\n                }\n            }\n        });\n    });\n\n    // Check if we should auto-sort (redirected from pagination)\n    const url = new URL(window.location.href);\n    if (url.searchParams.get('sortbystudiescode') === '1') {\n        // Remove the marker from URL (clean up)\n        url.searchParams.delete('sortbystudiescode');\n        window.history.replaceState({}, '', url.toString());\n\n        // Trigger sort\n        sortTableByStudiesCode(table);\n        sortIcon.innerHTML = studiesCodeSortAsc ? ' ↓' : ' ↑';\n    }\n};\n\n/**\n * Initialize the module.\n *\n * @param {string} nesanumbers - JSON string of NESA numbers data\n */\nexport const init = (nesanumbers) => {\n    const parsedNesaNumbers = JSON.parse(nesanumbers);\n\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', () => {\n            setStudiesCodeForUserGradesTable(parsedNesaNumbers);\n            setStudiesCodeForSubmissionsTable(parsedNesaNumbers);\n        });\n    } else {\n        setStudiesCodeForUserGradesTable(parsedNesaNumbers);\n        setStudiesCodeForSubmissionsTable(parsedNesaNumbers);\n    }\n};\n"],"names":["setStudiesCodeForUserGradesTable","nesanumbers","table","document","getElementById","headingRow","querySelector","useremailColumn","emailIndex","Array","from","children","indexOf","nesaHeader","createElement","className","setAttribute","spanElement","textContent","buttonElement","appendChild","parentNode","insertBefore","querySelectorAll","forEach","row","userid","getAttribute","studiescode","undefined","studies_code","nesaCell","divElement","useremailCell","th","newClassNumber","classList","remove","add","td","index","currentColumnIndex","firstTr","topLeftCell","userfieldCount","length","userRows","lastUserRow","nextSibling","nextElementSibling","thElement","studiesCodeSortAsc","sortTableByStudiesCode","tbody","allRows","sort","a","b","cellA","cellB","valueA","trim","valueB","comparison","localeCompare","numeric","sensitivity","setStudiesCodeForSubmissionsTable","thead","studiesCodeHeader","style","cursor","sortLink","href","title","textDecoration","color","sortIcon","innerHTML","addEventListener","e","preventDefault","URL","window","location","searchParams","get","url","set","toString","redirectToShowAllAndSort","tbodyRows","userClass","split","find","cls","startsWith","replace","_nesanumbers$userid2","studiesCodeCell","oldClassMatch","match","oldNum","parseInt","delete","history","replaceState","parsedNesaNumbers","JSON","parse","readyState"],"mappings":"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"}