/**
 * Javascript controller for the "Actions" panel at the bottom of the page.
 *
 * @module     local_nesa
 * @copyright  2025 Veronica Bermegui
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_nesa/control",["jquery"],(function($){return{init:function(nesanumbers){$(document).ready((function(){var table=$("#user-grades");if(nesanumbers=JSON.parse(nesanumbers),table.length){var headingRow=table.find("tr.heading"),useremailColumn=headingRow.find("th.userfield.useremail"),emailIndex=useremailColumn.index(),nesaHeader=$("<th>").append($("<span>").attr("data-collapse","content").text("NESA number")).append($("<button>").addClass("nesa-number btn btn-link btn-icon icon-size-3 cellmenubtn").attr({type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false","data-type":"studiescode","data-id":"studiescode"})).addClass("userfield studiescode cell c"+emailIndex).attr({"data-col":"studiescode",scope:"col"});useremailColumn.before(nesaHeader),table.find("tbody tr").each((function(){var _nesanumbers$userid,_nesanumbers$userid2,userid=$(this).attr("data-uid"),studiescode=null==(null===(_nesanumbers$userid=nesanumbers[userid])||void 0===_nesanumbers$userid?void 0:_nesanumbers$userid.studies_code)?"N/A":null===(_nesanumbers$userid2=nesanumbers[userid])||void 0===_nesanumbers$userid2?void 0:_nesanumbers$userid2.studies_code,nesaCell=$("<td>").addClass("userfield studiescode cell c"+emailIndex).attr("data-col","studiescode").append($("<div>").attr("data-collapse","content").text(studiescode));$(this).find("td.userfield.useremail").first().before(nesaCell)}),nesanumbers),headingRow.find("th.userfield.useremail").each((function(){var newClassNumber=emailIndex+1;$(this).removeClass("c"+emailIndex).addClass("c"+newClassNumber)})),table.find("tbody td.userfield.useremail").each((function(){var newClassNumber=emailIndex+1;$(this).removeClass("c"+emailIndex).addClass("c"+newClassNumber)})),headingRow.find("th").each((function(index){if(index>emailIndex){var newClassNumber=index+1;$(this).removeClass("c"+(index+1)).addClass("c"+newClassNumber)}})),table.find("tbody td").each((function(){var currentColumnIndex=$(this).index();if(currentColumnIndex>emailIndex){var newClassNumber=currentColumnIndex+1;$(this).removeClass("c"+(currentColumnIndex+1)).addClass("c"+newClassNumber)}}));var topLeftCell=table.find("tr").first().find("th.cell.topleft.cell.c0"),userfieldCount=headingRow.find("th.userfield").length;topLeftCell.attr("colspan",userfieldCount+1),table.find("tr.userrow").last().nextAll().each((function(){$(this).find("th").attr("colspan",userfieldCount+1)}))}}))}}}));

//# sourceMappingURL=control.min.js.map